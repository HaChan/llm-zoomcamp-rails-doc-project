TheInboundEmailis an Active Record that keeps a reference to the raw email stored in Active Storage and tracks the status of processing. By default, incoming emails will go through the following lifecycle:Pending: Just received by one of the ingress controllers and scheduled for routing.Processing: During active processing, while a specific mailbox is running its process method.Delivered: Successfully processed by the specific mailbox.Failed: An exception was raised during the specific mailboxâs execution of the#processmethod.Bounced: Rejected processing by the specific mailbox and bounced to sender.Once theInboundEmailhas reached the status of being eitherdelivered,failed, orbounced, itâll count as having been#processed?. Once processed, theInboundEmailwill be scheduled for automatic incineration at a later point.When working with anInboundEmail, youâll usually interact with the parsed version of the source, which is available as aMailobject from#mail. But you can also access the raw source directly using the#sourcemethod.Examples:inbound_email.mail.from # => 'david@loudthinking.com'
inbound_email.source # Returns the full rfc822 source of the email as textNamespaceMODULEActionMailbox::InboundEmail::IncineratableMODULEActionMailbox::InboundEmail::MessageIdMODULEActionMailbox::InboundEmail::RoutableMethodsMmailPprocessed?SsourceInstance Public methodsmail()LinkSource:show|on GitHub# File actionmailbox/app/models/action_mailbox/inbound_email.rb, line 33defmail@mail||=Mail.from_source(source)endprocessed?()LinkSource:show|on GitHub# File actionmailbox/app/models/action_mailbox/inbound_email.rb, line 41defprocessed?delivered?||failed?||bounced?endsource()LinkSource:show|on GitHub# File actionmailbox/app/models/action_mailbox/inbound_email.rb, line 37defsource@source||=raw_email.downloadend