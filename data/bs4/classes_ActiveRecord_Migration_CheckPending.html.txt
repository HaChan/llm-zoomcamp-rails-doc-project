This class is used to verify that all migrations have been run before loading a web page ifconfig.active_record.migration_erroris set to:page_load.MethodsCcallNnewClass Public methodsnew(app, file_watcher: ActiveSupport::FileUpdateChecker)LinkSource:show|on GitHub# File activerecord/lib/active_record/migration.rb, line 652definitialize(app,file_watcher:ActiveSupport::FileUpdateChecker)@app=app@needs_check=true@mutex=Mutex.new@file_watcher=file_watcherendInstance Public methodscall(env)LinkSource:show|on GitHub# File activerecord/lib/active_record/migration.rb, line 659defcall(env)@mutex.synchronizedo@watcher||=build_watcherdo@needs_check=trueActiveRecord::Migration.check_pending_migrations@needs_check=falseendif@needs_check@watcher.executeelse@watcher.execute_if_updatedendend@app.call(env)end