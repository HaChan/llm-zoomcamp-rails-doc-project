DeprecatedConstantProxytransforms a constant into a deprecated one. It takes the full names of an old (deprecated) constant and of a new constant (both in string form) and a deprecator. The deprecated constant now returns the value of the new one.PLANETS = %w(mercury venus earth mars jupiter saturn uranus neptune pluto)

# (In a later update, the original implementation of `PLANETS` has been removed.)

PLANETS_POST_2006 = %w(mercury venus earth mars jupiter saturn uranus neptune)
PLANETS = ActiveSupport::Deprecation::DeprecatedConstantProxy.new("PLANETS", "PLANETS_POST_2006", ActiveSupport::Deprecation.new)

PLANETS.map { |planet| planet.capitalize }
# => DEPRECATION WARNING: PLANETS is deprecated! Use PLANETS_POST_2006 instead.
     (Backtrace informationâ¦)
     ["Mercury", "Venus", "Earth", "Mars", "Jupiter", "Saturn", "Uranus", "Neptune"]MethodsAappend_featuresCclassEextendedIinspectNnew,newPprepend_featuresClass Public methodsnew(*args, **options, &block)LinkSource:show|on GitHub# File activesupport/lib/active_support/deprecation/proxy_wrappers.rb, line 121defself.new(*args,**options,&block)object=args.firstreturnobjectunlessobjectsuperendnew(old_const, new_const, deprecator, message: "#{old_const} is deprecated! Use #{new_const} instead.")LinkSource:show|on GitHub# File activesupport/lib/active_support/deprecation/proxy_wrappers.rb, line 128definitialize(old_const,new_const,deprecator,message:"#{old_const} is deprecated! Use #{new_const} instead.")Kernel.require"active_support/inflector/methods"@old_const=old_const@new_const=new_const@deprecator=deprecator@message=messageendInstance Public methodsappend_features(base)LinkSource:show|on GitHub# File activesupport/lib/active_support/deprecation/proxy_wrappers.rb, line 158defappend_features(base)@deprecator.warn(@message,caller_locations)base.include(target)endclass()LinkReturns the class of the new constant.PLANETS_POST_2006 = %w(mercury venus earth mars jupiter saturn uranus neptune)
PLANETS = ActiveSupport::Deprecation::DeprecatedConstantProxy.new('PLANETS', 'PLANETS_POST_2006')
PLANETS.class # => ArraySource:show|on GitHub# File activesupport/lib/active_support/deprecation/proxy_wrappers.rb, line 154defclasstarget.classendextended(base)LinkSource:show|on GitHub# File activesupport/lib/active_support/deprecation/proxy_wrappers.rb, line 168defextended(base)@deprecator.warn(@message,caller_locations)base.extend(target)endinspect()LinkDonât give a deprecation warning on inspect since test/unit and error logs rely on it for diagnostics.Source:show|on GitHub# File activesupport/lib/active_support/deprecation/proxy_wrappers.rb, line 141definspecttarget.inspectendprepend_features(base)LinkSource:show|on GitHub# File activesupport/lib/active_support/deprecation/proxy_wrappers.rb, line 163defprepend_features(base)@deprecator.warn(@message,caller_locations)base.prepend(target)end