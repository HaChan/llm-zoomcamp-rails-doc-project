Action Dispatch HTTP FilterParametersAllows you to specify sensitive query string and POST parameters to filter from the request log.# Replaces values with "[FILTERED]" for keys that match /foo|bar/i.
env["action_dispatch.parameter_filter"] = [:foo, "bar"]For more information about filter behavior, seeActiveSupport::ParameterFilter.MethodsEenv_filterFfiltered_env,filtered_parameters,filtered_path,filtered_query_stringNnewPparameter_filter,parameter_filter_forConstantsKV_RE="[^&;=]+"PAIR_RE=%r{(#{KV_RE})=(#{KV_RE})}Class Public methodsnew()LinkSource:show|on GitHub# File actionpack/lib/action_dispatch/http/filter_parameters.rb, line 24definitializesuper@filtered_parameters=nil@filtered_env=nil@filtered_path=nil@parameter_filter=nilendInstance Public methodsfiltered_env()LinkReturns a hash of request.env with all sensitive data replaced.Source:show|on GitHub# File actionpack/lib/action_dispatch/http/filter_parameters.rb, line 40deffiltered_env@filtered_env||=env_filter.filter(@env)endfiltered_parameters()LinkReturns a hash of parameters with all sensitive data replaced.Source:show|on GitHub# File actionpack/lib/action_dispatch/http/filter_parameters.rb, line 33deffiltered_parameters@filtered_parameters||=parameter_filter.filter(parameters)rescueActionDispatch::Http::Parameters::ParseError@filtered_parameters= {}endfiltered_path()LinkReconstructs a path with all sensitive GET parameters replaced.Source:show|on GitHub# File actionpack/lib/action_dispatch/http/filter_parameters.rb, line 45deffiltered_path@filtered_path||=query_string.empty??path:"#{path}?#{filtered_query_string}"endparameter_filter()LinkReturns theActiveSupport::ParameterFilterobject used to filter in this request.Source:show|on GitHub# File actionpack/lib/action_dispatch/http/filter_parameters.rb, line 51defparameter_filter@parameter_filter||=ifhas_header?("action_dispatch.parameter_filter")parameter_filter_forget_header("action_dispatch.parameter_filter")elseNULL_PARAM_FILTERendendInstance Private methodsenv_filter()LinkSource:show|on GitHub# File actionpack/lib/action_dispatch/http/filter_parameters.rb, line 60defenv_filter# :doc:user_key=fetch_header("action_dispatch.parameter_filter") {returnNULL_ENV_FILTER}parameter_filter_for(Array(user_key)+ENV_MATCH)endfiltered_query_string()LinkSource:show|on GitHub# File actionpack/lib/action_dispatch/http/filter_parameters.rb, line 73deffiltered_query_string# :doc:query_string.gsub(PAIR_RE)do|_|parameter_filter.filter($1=>$2).first.join("=")endendparameter_filter_for(filters)LinkSource:show|on GitHub# File actionpack/lib/action_dispatch/http/filter_parameters.rb, line 67defparameter_filter_for(filters)# :doc:ActiveSupport::ParameterFilter.new(filters)end