Include in a cookie jar to allow chaining, e.g.cookies.permanent.signed.MethodsEencryptedPpermanentSsigned,signed_or_encryptedInstance Public methodsencrypted()LinkReturns a jar thatâll automatically encrypt cookie values before sending them to the client and will decrypt them for read. If the cookie was tampered with by the user (or a 3rd party),nilwill be returned.Ifconfig.action_dispatch.encrypted_cookie_saltandconfig.action_dispatch.encrypted_signed_cookie_saltare both set, legacy cookies encrypted with HMAC AES-256-CBC will be transparently upgraded.This jar requires that you set a suitable secret for the verification on your appâssecret_key_base.Example:cookies.encrypted[:discount] = 45
# => Set-Cookie: discount=DIQ7fw==--K3n//8vvnSbGq9dA--7Xh91HfLpwzbj1czhBiwOg==; path=/

cookies.encrypted[:discount] # => 45Source:show|on GitHub# File actionpack/lib/action_dispatch/middleware/cookies.rb, line 272defencrypted@encrypted||=EncryptedKeyRotatingCookieJar.new(self)endpermanent()LinkReturns a jar thatâll automatically set the assigned cookies to have an expiration date 20 years from now. Example:cookies.permanent[:prefers_open_id] = true
# => Set-Cookie: prefers_open_id=true; path=/; expires=Sun, 16-Dec-2029 03:24:16 GMTThis jar is only meant for writing. Youâll read permanent cookies through the regular accessor.This jar allows chaining with the signed jar as well, so you can set permanent, signed cookies. Examples:cookies.permanent.signed[:remember_me] = current_user.id
# => Set-Cookie: remember_me=BAhU--848956038e692d7046deab32b7131856ab20e14e; path=/; expires=Sun, 16-Dec-2029 03:24:16 GMTSource:show|on GitHub# File actionpack/lib/action_dispatch/middleware/cookies.rb, line 232defpermanent@permanent||=PermanentCookieJar.new(self)endsigned()LinkReturns a jar thatâll automatically generate a signed representation of cookie value and verify it when reading from the cookie again. This is useful for creating cookies with values that the user is not supposed to change. If a signed cookie was tampered with by the user (or a 3rd party),nilwill be returned.This jar requires that you set a suitable secret for the verification on your appâssecret_key_base.Example:cookies.signed[:discount] = 45
# => Set-Cookie: discount=BAhpMg==--2c1c6906c90a3bc4fd54a51ffb41dffa4bf6b5f7; path=/

cookies.signed[:discount] # => 45Source:show|on GitHub# File actionpack/lib/action_dispatch/middleware/cookies.rb, line 251defsigned@signed||=SignedKeyRotatingCookieJar.new(self)endsigned_or_encrypted()LinkReturns thesignedorencryptedjar, preferringencryptedifsecret_key_baseis set. Used byActionDispatch::Session::CookieStoreto avoid the need to introduce new cookie stores.Source:show|on GitHub# File actionpack/lib/action_dispatch/middleware/cookies.rb, line 279defsigned_or_encrypted@signed_or_encrypted||=ifrequest.secret_key_base.present?encryptedelsesignedendend