Holds common methods for migrations. It assumes that migrations have the [0-9]*_name format and can be used by other frameworks (like Sequel) just by implementing thenext_migration_numbermethod.MethodsCcreate_migrationMmigration_templateSset_migration_assigns!Attributes[R]migration_class_name[R]migration_file_name[R]migration_numberInstance Public methodscreate_migration(destination, data, config = {}, &block)LinkSource:show|on GitHub# File railties/lib/rails/generators/migration.rb, line 35defcreate_migration(destination,data,config= {},&block)actionRails::Generators::Actions::CreateMigration.new(self,destination,block||data.to_s,config)endmigration_template(source, destination, config = {})LinkCreates a migration template at the given destination. The difference to the default template method is that the migration number is prepended to the destination file name.The migration number, migration file name, migration class name are available as instance variables in the template to be rendered.migration_template "migration.rb", "db/migrate/add_foo_to_bar.rb"Source:show|on GitHub# File railties/lib/rails/generators/migration.rb, line 56defmigration_template(source,destination,config= {})source=File.expand_path(find_in_source_paths(source.to_s))set_migration_assigns!(destination)dir,base=File.split(destination)numbered_destination=File.join(dir, ["%migration_number%",base].join("_"))file=create_migrationnumbered_destination,nil,configdoERB.new(::File.binread(source),trim_mode:"-",eoutvar:"@output_buffer").result(binding)endRails::Generators.add_generated_file(file)endset_migration_assigns!(destination)LinkSource:show|on GitHub# File railties/lib/rails/generators/migration.rb, line 39defset_migration_assigns!(destination)destination=File.expand_path(destination,destination_root)migration_dir=File.dirname(destination)@migration_number=self.class.next_migration_number(migration_dir)@migration_file_name=File.basename(destination,".rb")@migration_class_name=@migration_file_name.camelizeend