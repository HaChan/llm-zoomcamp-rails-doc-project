MethodsCcache,clear_query_cacheDdirties_query_cache,disable_query_cache!Eenable_query_cache!NnewQquery_cache_enabledUuncachedAttributes[RW]query_cacheClass Public methodsdirties_query_cache(base, *method_names)LinkSource:show|on GitHub# File activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb, line 20defdirties_query_cache(base,*method_names)method_names.eachdo|method_name|base.class_eval<<-end_code,__FILE__,__LINE__+1def #{method_name}(...)
                if pool.dirties_query_cache
                  ActiveRecord::Base.clear_query_caches_for_current_thread
                end
                super
              endend_codeendendnew(*)LinkSource:show|on GitHub# File activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb, line 194definitialize(*)super@query_cache=nilendInstance Public methodscache(&block)LinkEnable the query cache within the block.Source:show|on GitHub# File activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb, line 204defcache(&block)pool.enable_query_cache(&block)endclear_query_cache()LinkClears the query cache.One reason you may wish to call this method explicitly is between queries that ask the database to randomize results. Otherwise the cache would see the same SQL query and repeatedly return the same result each time, silently undermining the randomness you were expecting.Source:show|on GitHub# File activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb, line 230defclear_query_cachepool.clear_query_cacheenddisable_query_cache!()LinkSource:show|on GitHub# File activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb, line 220defdisable_query_cache!pool.disable_query_cache!endenable_query_cache!()LinkSource:show|on GitHub# File activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb, line 208defenable_query_cache!pool.enable_query_cache!endquery_cache_enabled()LinkSource:show|on GitHub# File activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb, line 199defquery_cache_enabled@query_cache&.enabled?enduncached(dirties: true, &block)LinkDisable the query cache within the block.Setdirties: falseto prevent query caches on all connections from being cleared by write operations. (By default, write operations dirty all connectionsâ query caches in case they are replicas whose cache would now be outdated.)Source:show|on GitHub# File activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb, line 216defuncached(dirties:true,&block)pool.disable_query_cache(dirties:dirties,&block)end