Action DispatchFileHandlerThis endpoint serves static files from disk usingRack::Files.URL paths are matched with static files according to expected conventions:path,path.html,path/index.html.Precompressed versions of these files are checked first. Brotli (.br) and gzip (.gz) files are supported. Ifpath.br exists, this endpoint returns that file with acontent-encoding: brheader.If no matching file is found, this endpoint responds404 Not Found.Pass therootdirectory to search for matching files, an optionalindex: "index"to change the defaultpath/index.html, and optional additional response headers.MethodsAattemptCcallNnewConstantsPRECOMPRESSED={
"br" => ".br",
"gzip" => ".gz",
"identity" => nil
}Accept-Encodingvalue -> file extensionClass Public methodsnew(root, index: "index", headers: {}, precompressed: %i[ br gzip ], compressible_content_types: /\A(?:text\/|application\/javascript|image\/svg\+xml)/)LinkSource:show|on GitHub# File actionpack/lib/action_dispatch/middleware/static.rb, line 55definitialize(root,index:"index",headers:{},precompressed:%i[ br gzip ],compressible_content_types:/\A(?:text\/|application\/javascript|image\/svg\+xml)/)@root=root.chomp("/").b@index=index@precompressed=Array(precompressed).map(&:to_s)|%w[ identity ]@compressible_content_types=compressible_content_types@file_server=::Rack::Files.new(@root,headers)endInstance Public methodsattempt(env)LinkSource:show|on GitHub# File actionpack/lib/action_dispatch/middleware/static.rb, line 69defattempt(env)request=Rack::Request.newenvifrequest.get?||request.head?iffound=find_file(request.path_info,accept_encoding:request.accept_encoding)serverequest,*foundendendendcall(env)LinkSource:show|on GitHub# File actionpack/lib/action_dispatch/middleware/static.rb, line 65defcall(env)attempt(env)||@file_server.call(env)end