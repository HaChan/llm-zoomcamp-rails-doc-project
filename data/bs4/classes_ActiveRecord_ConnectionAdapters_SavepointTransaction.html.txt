Active Record Savepoint TransactionMethodsCcommitFfull_rollback?Mmaterialize!NnewRrestart,rollbackClass Public methodsnew(connection, savepoint_name, parent_transaction, **options)LinkSource:show|on GitHub# File activerecord/lib/active_record/connection_adapters/abstract/transaction.rb, line 405definitialize(connection,savepoint_name,parent_transaction,**options)super(connection,**options)parent_transaction.state.add_child(@state)ifisolation_levelraiseActiveRecord::TransactionIsolationError,"cannot set transaction isolation in a nested transaction"end@savepoint_name=savepoint_nameendInstance Public methodscommit()LinkSource:show|on GitHub# File activerecord/lib/active_record/connection_adapters/abstract/transaction.rb, line 439defcommitconnection.release_savepoint(savepoint_name)ifmaterialized?@state.commit!@instrumenter.finish(:commit)ifmaterialized?endfull_rollback?()LinkSource:show|on GitHub# File activerecord/lib/active_record/connection_adapters/abstract/transaction.rb, line 445deffull_rollback?;false;endmaterialize!()LinkSource:show|on GitHub# File activerecord/lib/active_record/connection_adapters/abstract/transaction.rb, line 417defmaterialize!connection.create_savepoint(savepoint_name)superendrestart()LinkSource:show|on GitHub# File activerecord/lib/active_record/connection_adapters/abstract/transaction.rb, line 422defrestartreturnunlessmaterialized?@instrumenter.finish(:restart)@instrumenter.startconnection.rollback_to_savepoint(savepoint_name)endrollback()LinkSource:show|on GitHub# File activerecord/lib/active_record/connection_adapters/abstract/transaction.rb, line 431defrollbackunless@state.invalidated?connection.rollback_to_savepoint(savepoint_name)ifmaterialized?&&connection.active?end@state.rollback!@instrumenter.finish(:rollback)ifmaterialized?end