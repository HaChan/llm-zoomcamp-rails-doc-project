Classthat will build the hash while the XML document is being parsed using SAX events.MethodsCcurrent_hashOon_cdata_block,on_characters,on_end_document,on_end_element,on_start_document,on_start_elementIncluded ModulesLibXML::XML::SaxParser::CallbacksConstantsCONTENT_KEY="__content__"HASH_SIZE_KEY="__hash_size__"Attributes[R]hashInstance Public methodscurrent_hash()LinkSource:show|on GitHub# File activesupport/lib/active_support/xml_mini/libxmlsax.rb, line 21defcurrent_hash@hash_stack.lastendon_cdata_block(string)LinkAlias for:on_characterson_characters(string)LinkAlso aliased as:on_cdata_blockSource:show|on GitHub# File activesupport/lib/active_support/xml_mini/libxmlsax.rb, line 55defon_characters(string)current_hash[CONTENT_KEY]<<stringendon_end_document()LinkSource:show|on GitHub# File activesupport/lib/active_support/xml_mini/libxmlsax.rb, line 30defon_end_document@hash=@hash_stack.pop@hash.delete(CONTENT_KEY)endon_end_element(name)LinkSource:show|on GitHub# File activesupport/lib/active_support/xml_mini/libxmlsax.rb, line 48defon_end_element(name)ifcurrent_hash.length>current_hash.delete(HASH_SIZE_KEY)&&current_hash[CONTENT_KEY].blank?||current_hash[CONTENT_KEY]==""current_hash.delete(CONTENT_KEY)end@hash_stack.popendon_start_document()LinkSource:show|on GitHub# File activesupport/lib/active_support/xml_mini/libxmlsax.rb, line 25defon_start_document@hash= {CONTENT_KEY=>+""}@hash_stack= [@hash]endon_start_element(name, attrs = {})LinkSource:show|on GitHub# File activesupport/lib/active_support/xml_mini/libxmlsax.rb, line 35defon_start_element(name,attrs= {})new_hash= {CONTENT_KEY=>+""}.merge!(attrs)new_hash[HASH_SIZE_KEY] =new_hash.size+1casecurrent_hash[name]whenArraythencurrent_hash[name]<<new_hashwhenHashthencurrent_hash[name] = [current_hash[name],new_hash]whennilthencurrent_hash[name] =new_hashend@hash_stack.push(new_hash)end