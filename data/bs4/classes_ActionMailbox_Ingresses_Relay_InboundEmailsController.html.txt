Ingests inbound emails relayed from an SMTP server.Authenticates requests using HTTP basic access authentication. The username is alwaysactionmailbox, and the password is read from the applicationâs encrypted credentials or an environment variable. See the Usage section below.Note that basic authentication is insecure over unencrypted HTTP. An attacker that intercepts cleartext requests to the ingress can learn its password. You should only use this ingress over HTTPS.Returns:204 No Contentif an inbound email is successfully recorded and enqueued for routing to the appropriate mailbox401 Unauthorizedif the request could not be authenticated404 Not Foundif Action Mailbox is not configured to accept inbound emails relayed from an SMTP server415 Unsupported Media Typeif the request does not contain an RFC 822 message500 Server Errorif the ingress password is not configured, or if one of the Active Record database, the Active Storage service, or the Active Job backend is misconfigured or unavailableUsageTell Action Mailbox to accept emails from an SMTP relay:# config/environments/production.rb
config.action_mailbox.ingress = :relayGenerate a strong password that Action Mailbox can use to authenticate requests to the ingress.Usebin/rails credentials:editto add the password to your applicationâs encrypted credentials underaction_mailbox.ingress_password, where Action Mailbox will automatically find it:action_mailbox:
  ingress_password: ...Alternatively, provide the password in theRAILS_INBOUND_EMAIL_PASSWORDenvironment variable.Configure your SMTP server to pipe inbound emails to the appropriate ingress command, providing theURLof the relay ingress and theINGRESS_PASSWORDyou previously generated.If your application lives athttps://example.com, you would configure the Postfix SMTP server to pipe inbound emails to the following command:$ bin/rails action_mailbox:ingress:postfix URL=https://example.com/rails/action_mailbox/postfix/inbound_emails INGRESS_PASSWORD=...Built-in ingress commands are available for these popular SMTP servers:Exim (bin/rails action_mailbox:ingress:exim)Postfix (bin/rails action_mailbox:ingress:postfix)Qmail (bin/rails action_mailbox:ingress:qmail)MethodsCcreateInstance Public methodscreate()LinkSource:show|on GitHub# File actionmailbox/app/controllers/action_mailbox/ingresses/relay/inbound_emails_controller.rb, line 54defcreateifrequest.bodyActionMailbox::InboundEmail.create_and_extract_message_id!request.body.readelsehead:unprocessable_entityendend