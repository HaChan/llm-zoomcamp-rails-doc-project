Ingests inbound emails from Postmark. Requires aRawEmailparameter containing a full RFC 822 message.Authenticates requests using HTTP basic access authentication. The username is alwaysactionmailbox, and the password is read from the applicationâs encrypted credentials or an environment variable. See the Usage section below.Note that basic authentication is insecure over unencrypted HTTP. An attacker that intercepts cleartext requests to the Postmark ingress can learn its password. You should only use the Postmark ingress over HTTPS.Returns:204 No Contentif an inbound email is successfully recorded and enqueued for routing to the appropriate mailbox401 Unauthorizedif the requestâs signature could not be validated404 Not Foundif Action Mailbox is not configured to accept inbound emails from Postmark422 Unprocessable Entityif the request is missing the requiredRawEmailparameter500 Server Errorif the ingress password is not configured, or if one of the Active Record database, the Active Storage service, or the Active Job backend is misconfigured or unavailableUsageTell Action Mailbox to accept emails from Postmark:# config/environments/production.rb
config.action_mailbox.ingress = :postmarkGenerate a strong password that Action Mailbox can use to authenticate requests to the Postmark ingress.Usebin/rails credentials:editto add the password to your applicationâs encrypted credentials underaction_mailbox.ingress_password, where Action Mailbox will automatically find it:action_mailbox:
  ingress_password: ...Alternatively, provide the password in theRAILS_INBOUND_EMAIL_PASSWORDenvironment variable.Configure Postmarkto forward inbound emails to/rails/action_mailbox/postmark/inbound_emailswith the usernameactionmailboxand the password you previously generated. If your application lived athttps://example.com, you would configure your Postmark inbound webhook with the following fully-qualified URL:https://actionmailbox:PASSWORD@example.com/rails/action_mailbox/postmark/inbound_emailsNOTE:When configuring your Postmark inbound webhook, be sure to check the box labeled *âInclude raw email content in JSON payloadâ*. Action Mailbox needs the raw email content to work.MethodsCcreateInstance Public methodscreate()LinkSource:show|on GitHub# File actionmailbox/app/controllers/action_mailbox/ingresses/postmark/inbound_emails_controller.rb, line 51defcreateActionMailbox::InboundEmail.create_and_extract_message_id!params.require("RawEmail")rescueActionController::ParameterMissing=>errorlogger.error<<~MESSAGE#{error.message}

        When configuring your Postmark inbound webhook, be sure to check the box
        labeled "Include raw email content in JSON payload".MESSAGEhead:unprocessable_entityend